# Changelog – PINE (CatBorg Studio)
## Version 1.20.0

**Release type:** Minor Update  
**Summary:** Large-scale node refactor introducing Lazy Self Population, LineOfSight_Check overhaul, legacy cleanup, and Behaviour Tree editor modernization.

---

### Added
- **Lazy Self Population Pattern (32 / 92 nodes)**
  - Introduced lazy enabled validation across an initial batch of nodes.
  - Nodes now validate and populate required components during the first `OnStart()` call.
  - Required components are automatically resolved from the Executor’s GameObject.
  - If a required component is missing, the node attempts to add it automatically.
  - Clear debug messages are emitted when validation or auto-population occurs.
  - Improves user experience by reducing strict setup requirements and preventing silent runtime failures.

---

### Changed
- **Collider Nodes – DeclaredType Simplification**
  The following nodes were updated:
  - `BoxCollider_Set`
  - `CapsuleCollider_Set`
  - `Collider_isTrigger`
  - `Collider_OnCollision`

  Changes:
  - Removed `DeclaredType.Node`.
  - Introduced `DeclaredType.Self` as the replacement.

  Behavior when `DeclaredType.Self` is selected:
  - During `OnStart()`, the node resolves the required collider from the Executor’s GameObject.
  - If the collider is missing, the node attempts to add it automatically.
  - All references are validated lazily on first execution.

- **LineOfSight_Check – Full Rework**
  - Target is now resolved dynamically every update, allowing runtime target changes without node reinitialization.
  - Parent colliders are ignored to prevent self-blocking.
  - Supports ignored tags, enabling vision to pass through selected objects (e.g. triggers, foliage, allies).
  - Ray traversal evaluates hits in distance order and stops at the first meaningful obstruction.
  - Improved correctness, flexibility, and runtime safety in complex scenes.

---

### Removed
- **Legacy Nodes**
  - Removed 10 legacy nodes previously marked with the `Legacy` property.
  - This removal finalizes the deprecation cycle announced when legacy tagging was introduced.

- **Legacy UI Toolkit & GraphView APIs**
  - Removed deprecated UI Toolkit and GraphView APIs from the Behaviour Tree editor.
  - Migrated deprecated UXML factories to modern `[UxmlElement]` usage.
  - Replaced deprecated transform access (`viewTransform`, `VisualElement.transform`) with style-based pan and zoom handling.
  - Editor now compiles cleanly with no UITK deprecation warnings and is future-proof for newer Unity versions, including Unity 6.3 LTS.

---

### Improved
- **Executor Inspector**
  - Redesigned Behaviour Tree field to prevent unwanted Project view focus.
  - Clicking the field now opens the Behaviour Tree editor.
  - Added drag & drop support.
  - Added object picker support.
  - Added asset highlight button for quick navigation.

---
